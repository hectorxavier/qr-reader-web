<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>Registros de Asistencia</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
</head>
<body>
    <h1>Registros de Asistencia</h1>

    <form method="get" action="/registros">
        Usuario: <input type="text" name="usuario" value="{{ usuario }}">
        Fecha: <input type="date" name="fecha" value="{{ fecha }}">
        Estado:
        <select name="estado">
            <option value="">Todos</option>
            <option value="VALIDO" {% if estado=='VALIDO' %}selected{% endif %}>VALIDO</option>
            <option value="INVALIDO" {% if estado=='INVALIDO' %}selected{% endif %}>INVALIDO</option>
        </select>
        <button type="submit">Filtrar</button>
    </form>

    <table border="1" width="100%">
        <thead>
            <tr>
                <th>ID</th>
                <th>Usuario</th>
                <th>QR</th>
                <th>Lat QR</th>
                <th>Lon QR</th>
                <th>Lat Usuario</th>
                <th>Lon Usuario</th>
                <th>Distancia (m)</th>
                <th>Estado</th>
                <th>Fecha</th>
                <th>Hora</th>
            </tr>
        </thead>
        <tbody>
            {% for r in registros %}
            <tr>
                <td>{{ r.id }}</td>
                <td>{{ r.username }}</td>
                <td>{{ r.qr_number }}</td>
                <td>{{ r.qr_lat }}</td>
                <td>{{ r.qr_lon }}</td>
                <td>{{ r.user_lat }}</td>
                <td>{{ r.user_lon }}</td>
                <td>{{ r.distancia|round(2) }}</td>
                <td>{{ r.estado }}</td>
                <td>{{ r.fecha }}</td>
                <td>{{ r.hora }}</td>
            </tr>
            {% endfor %}
        </tbody>
    </table>

    <a href="/logout">Cerrar sesi√≥n</a>
</body>
</html>
